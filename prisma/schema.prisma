generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  username     String   @unique
  passwordHash String
  streak       Int
  wasToday     Boolean
}

model Language {
  id              String   @id @default(auto()) @map("_id") @db.ObjectId
  active          Boolean
  userId          String
  title           String
  // lessons    Lesson[]
  topics          Topic[]
  lessonsToRepeat Lesson[]
}

model Topic {
  id             String    @id @default(auto()) @map("_id") @db.ObjectId
  title          String    @unique
  createdAt      DateTime  @default(now())
  updatedAt      String
  // lessons        Lesson[]
  lessonIDs      String[]
  chapters       Int
  currentChapter Int
  level          Int
  Language       Language? @relation(fields: [projectId], references: [id])
  projectId      String
}

model Lesson {
  id                String   @id @default(auto()) @map("_id") @db.ObjectId
  // title          String        @unique
  // createdAt  DateTime  @default(now())
  // updatedAt  String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  // steps          LessonStep[]
  // chapters       Int
  // currentChapter Int
  // level          Int
  // Language       Language?     @relation(fields: [projectId], references: [id])
  // projectId      String
  number     Int
  stepType   String
  question   String?
  text       String?
  answer     String[]
  keywords   String[]
  definition  String?
  variants   Variant[]
  // Topic      Topic?    @relation(fields: [topicId], references: [id])
  // topicId    String?   @db.ObjectId
  chapter    Int
  Language   Language? @relation(fields: [languageId], references: [id])
  languageId String?   @db.ObjectId
}

// type LessonStep {
//   id         String
//   number     Int
//   stepType   String
//   question   String?
//   text       String?
//   answer     String[]
//   keywords   String[]
//   definition  String?
//   variants   Variant[]
// }

type Variant {
  idx         Int
  type        String?
  value       String
  isFocused   Boolean
  isConnected Boolean?
}
